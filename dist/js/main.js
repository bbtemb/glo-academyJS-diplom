(()=>{"use strict";const e=e=>{const t=document.getElementById(e),r=(t.querySelectorAll("input"),t.querySelector(".checkbox__input")),o=document.createElement("div"),l=document.querySelector(".popup-thank"),s=document.querySelector("body");o.classList.add("error-message"),o.innerHTML="<p>Ознакомьтесь с политикой конфиденциальности</p>";try{if(!t)throw new Error("Форма не найдена");r.addEventListener("change",(()=>{o.classList.add("hide")})),t.addEventListener("submit",(c=>{c.preventDefault(),r.checked?((()=>{const e=new FormData(t),r={};var o;e.forEach(((e,t)=>{r[t]=e})),o=r,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((e=>e.json()))})(),t.reset(),(()=>{let e=!0;l.style.visibility="visible",s.addEventListener("click",(t=>{e&&(t.target.closest(".close")||"popup popup-thank"===t.target.className)&&(l.style.visibility="hidden",e=!e)}))})(),"feedback6"===e&&(document.querySelector(".popup-consultation").style.visibility="hidden")):(t.append(o),o.classList.remove("hide"))}))}catch(e){console.log(e.message)}},t=()=>{const e=document.querySelectorAll(".formula-item"),t=document.querySelectorAll(".formula-item-popup");if(document.querySelector(".formula-title"),e.forEach((r=>{r.addEventListener("mouseenter",(e=>{r.querySelector(".formula-item-popup").classList.add("active")})),r.addEventListener("mouseleave",(e=>{r.querySelector(".formula-item-popup").classList.remove("active")})),screen.width>1024&&window.addEventListener("scroll",(r=>{e.forEach(((e,r)=>{e.getBoundingClientRect().y<t[r].offsetHeight-20?t[r].classList.add("moved"):t[r].classList.remove("moved")}))}))})),screen.width<1025){const e=document.querySelector(".formula-slider").querySelectorAll(".formula-slider__slide"),t=document.querySelector("body");let r=1,o=e.length;const l=()=>{e.forEach(((e,t)=>{t+1===r?e.classList.add("active"):e.classList.remove("active")}))};t.addEventListener("click",(e=>{e.target.closest("#formula-arrow_right")&&(r<o?(r++,l()):(r=1,l())),e.target.closest("#formula-arrow_left")&&(r>1?(r--,l()):(r=o,l()))}))}},r=()=>{const e=document.querySelector("body"),t=document.querySelector(".repair-types-slider");let r=document.querySelector(".types-repair1"),o=document.querySelectorAll(".repair-types-nav__item"),l=r.querySelectorAll(".repair-types-slider__slide"),s=document.querySelector(".slider-counter-content__current"),c=document.querySelector(".slider-counter-content__total"),i=new Event("click"),n=1,a=1,d=l.length;const p=(e,t)=>{e.forEach(((e,r)=>{e.setAttribute("id",`${t}-${r+1}`)}))};if(p(l,"repair-types-slider__slide"),o.forEach((e=>{e.addEventListener("click",(i=>{o.forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),n=i.target.getAttribute("id").substr(-1),r=document.querySelector(`.types-repair${n}`),l=r.querySelectorAll(".repair-types-slider__slide"),p(l,"repair-types-slider__slide"),t.prepend(r),d=l.length,c.innerText=d,a=1,s.innerText=a}))})),e.addEventListener("click",(e=>{e.target.closest("#repair-types-arrow_right")&&a<d&&(((e,t)=>{let r=e.querySelector(`#repair-types-slider__slide-${a+1}`);e.prepend(r)})(r),a++,s.innerText=a),e.target.closest("#repair-types-arrow_left")&&a>1&&(((e,t)=>{let r=e.querySelector("#repair-types-slider__slide-"+(a-1));e.prepend(r)})(r),a--,s.innerText=a)})),screen.width<1025){const t=document.querySelector(".repair-types-nav");let r=document.querySelector(`#repair-slider-${n}`),o=0,l=t.scrollWidth-t.clientWidth;e.addEventListener("click",(e=>{e.target.closest("#nav-arrow-repair-left_base")&&n>1&&(n--,r=document.querySelector(`#repair-slider-${n}`),document.querySelector(`#repair-slider-${n}`).dispatchEvent(i),t.scrollLeft-=r.offsetWidth,o<0&&(o=0)),e.target.closest("#nav-arrow-repair-right_base")&&n<5&&(n++,r=document.querySelector(`#repair-slider-${n}`),document.querySelector(`#repair-slider-${n}`).dispatchEvent(i),t.scrollLeft+=r.offsetWidth,o>l&&(o=l))}))}c.innerText=d},o=()=>{const e=document.querySelector(".popup-transparency"),t=document.querySelector("body"),r=e.querySelectorAll(".popup-transparency-slider__slide"),o=t.querySelectorAll(".transparency-item"),l=e.querySelector(".popup-transparency-slider"),s=e.querySelector(".slider-counter-content__current"),c=e.querySelector(".slider-counter-content__total");let i=!1;const n=(e,t)=>{e.forEach(((e,r)=>{e.setAttribute("id",`${t}-${r+1}`)}))},a=()=>{o.forEach(((e,t)=>{t+1!==p?e.classList.add("hidden"):e.classList.remove("hidden")}))};let d=1,p=1;s.innerText=d;let u=r.length,y=o.length;c.innerText=u,n(r,"popup-transparency-slide"),n(o,"transparency-item"),screen.width<1090&&(a(),t.addEventListener("click",(e=>{e.target.closest("#transparency-arrow_right")&&p<y&&(p++,a()),e.target.closest("#transparency-arrow_left")&&p>1&&(p--,a())}))),screen.width>1090&&o.forEach((e=>{e.classList.remove("hidden")})),t.addEventListener("click",(t=>{t.target.closest(".transparency-item__img")&&(e.style.visibility="visible",i=!i,"transparency-item-1"===t.target.offsetParent.id&&(d=1),"transparency-item-2"===t.target.offsetParent.id&&(d=2),"transparency-item-3"===t.target.offsetParent.id&&(d=3),s.innerText=d,((e,t)=>{let r=e.querySelector(`#popup-transparency-slide-${d}`);e.prepend(r)})(l)),i&&(t.target.closest("#transparency_left")&&d>1&&(((e,t)=>{let r=e.querySelector("#popup-transparency-slide-"+(d-1));e.prepend(r)})(l),d--,s.innerText=d),t.target.closest("#transparency_right")&&d<u&&(((e,t)=>{let r=e.querySelector(`#popup-transparency-slide-${d+1}`);e.prepend(r)})(l),d++),s.innerText=d,(t.target.closest(".close")||"popup popup-transparency"===t.target.className)&&(e.style.visibility="hidden",i=!i))}))};(()=>{const e=document.querySelector(".header-contacts__phone-number-accord .header-contacts__phone-number"),t=document.querySelector(".header-contacts__messagers"),r=document.querySelector(".header-contacts__arrow");r.addEventListener("click",(()=>{e.classList.toggle("active"),t.classList.toggle("active"),r.classList.toggle("active")}))})(),(()=>{const e=document.querySelector(".popup-menu"),t=document.querySelector(".popup-dialog-menu"),r=document.querySelector(".close-menu"),o=document.querySelector("body");let l=!1;const s=()=>{e.classList.toggle("active"),t.classList.toggle("active"),l=!l},c=e=>{const t=e.getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};o.addEventListener("click",(e=>{e.target.closest(".menu")&&s(),e.target.closest(".link-price")&&l&&s(),l&&!e.target.closest(".menu")&&(e.target!==r&&e.target.closest(".popup-dialog-menu")||s()),e.target.closest(".popup-menu-nav__item")&&(e.preventDefault(),s(),e.target.closest(".menu-link")?c(e.target):c(e.target.firstElementChild)),e.target.closest(".button-footer")&&(e.preventDefault(),c(o.querySelector(".button-footer a")))}))})(),(()=>{const e=document.querySelector(".popup-repair-types"),t=document.querySelector("body"),r=document.querySelector(".nav-list-popup-repair"),o=document.querySelector(".popup-repair-types-content-table");let l={},s=[],c=!1;t.addEventListener("click",(t=>{t.target.closest(".link-price")&&(e.style.visibility="visible",c=!c),c&&(t.target.closest(".close")||"popup popup-repair-types"===t.target.className)&&(e.style.visibility="hidden",c=!c)})),fetch("http://localhost:3000/services").then((e=>e.json())).then((e=>e)).catch((e=>(console.error("Произошла ошибка при загрузке данных:",e),[]))).then((e=>{s=e,s.forEach((e=>{e.type in l||(l[e.type]=[]),l[e.type].push(e)})),(e=>{Object.keys(e).forEach((t=>{const l=document.createElement("button");l.classList.add("button_o","popup-repair-types-nav__item"),l.innerHTML=`${t}`,r.appendChild(l);const s=document.createElement("table"),c=document.createElement("tbody");s.classList.add("popup-repair-types-content-table__list"),s.setAttribute("id",`${t}`),o.appendChild(s),s.appendChild(c),e[t].forEach((e=>{const t=document.createElement("tr");t.classList.add("mobile-row"),t.innerHTML=`<tr class="mobile-row">\n        <td class="repair-types-name">\n          ${e.name}\n        </td>\n        <td class="mobile-col-title tablet-hide desktop-hide">\n          Ед.измерения\n        </td>\n        <td class="mobile-col-title tablet-hide desktop-hide">\n          Цена за ед.\n        </td>\n        <td class="repair-types-value">${e.units}</td>\n        <td class="repair-types-value">${e.cost} руб.</td>\n      </tr>`,c.appendChild(t)}))}))})(l);const t=document.querySelectorAll(".popup-repair-types-nav__item"),c=document.querySelectorAll(".popup-repair-types-content-table__list"),i=document.querySelector("#switch-inner");t.forEach((e=>{e.addEventListener("click",(e=>{t.forEach((e=>{e.classList.remove("active")})),c.forEach((t=>{t.id===e.target.textContent?t.classList.remove("hidden"):t.classList.add("hidden")})),e.target.classList.add("active"),i.textContent=e.target.textContent}))}))}))})(),document.querySelectorAll("#feedback-input1, #feedback-input2, #feedback-input3, #feedback-input4, #feedback-input5, #feedback-input6").forEach((e=>{e.addEventListener("input",(t=>{const r=e.value.replace(/\D+/g,"");let o="";for(let e=0;e<r.length&&e<11;e++){switch(e){case 0:o+="7"===(l=r[e])?"+7 (":"9"===l?"+7 (9":"+7 (";continue;case 4:o+=") ";break;case 7:case 9:o+="-"}o+=r[e]}var l;e.value=o}))})),(()=>{const e=document.querySelector(".popup-privacy"),t=document.querySelector("body");let r=!1;t.addEventListener("click",(t=>{t.target.closest("span.link-privacy")&&(e.style.visibility="visible",r=!r),r&&(t.target.closest(".close")||"popup popup-privacy"===t.target.className)&&(e.style.visibility="hidden",r=!r)}))})(),t(),r(),(()=>{const e=document.querySelector("body"),t=document.querySelector(".portfolio-slider"),r=document.querySelector("#portfolio-arrow_left"),o=document.querySelector("#portfolio-arrow_right"),l=document.querySelectorAll(".portfolio-slider__slide"),s=document.querySelector(".popup-dialog-portfolio"),c=e.querySelector(".popup.popup-portfolio"),i=s.querySelector(".popup-portfolio-slider"),n=s.querySelector(".popup-portfolio-text-slider"),a=s.querySelectorAll(".popup-arrow"),d=(s.querySelector("#popup-portfolio-counter"),s.querySelector(".slider-counter-content__current")),p=s.querySelector(".slider-counter-content__total"),u=document.querySelector(".popup-portfolio>.close");let y=s.querySelectorAll(".popup-portfolio-slider__slide"),m=s.querySelectorAll(".popup-portfolio-text");const h=l[0].offsetWidth;let v=1;d.innerText=v;let f=y.length;p.innerText=f,r.addEventListener("click",(e=>{t.style.scrollBehavior="smooth",t.scrollLeft-=h})),o.addEventListener("click",(e=>{t.style.scrollBehavior="smooth",t.scrollLeft+=h}));const g=(e,t)=>{e.forEach(((e,r)=>{e.setAttribute("id",`${t}-${r+1}`)}))},b=(e,t)=>{let r=e.querySelector(`#${t}-${v-1}`);e.prepend(r)},S=(e,t)=>{let r=e.querySelector(`#${t}-${v+1}`);e.prepend(r)};if(t.addEventListener("scroll",(()=>{0===t.scrollLeft?r.style.display="none":r.style.display="flex",t.scrollLeft+t.clientWidth===t.scrollWidth?o.style.display="none":o.style.display="flex"})),l.forEach((e=>{e.addEventListener("click",(e=>{s.style.visibility="visible",c.style.visibility="visible",m.forEach(((e,t)=>{e.style.display="block"})),u.style.visibility="visible"})),g(y,"popup-slides"),g(m,"popup-slides-text")})),e.addEventListener("click",(e=>{(e.target.closest(".close")||"popup popup-portfolio"===e.target.className)&&(s.style.visibility="hidden",c.style.visibility="hidden",u.style.visibility="hidden")})),a.forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".popup-arrow_left")&&v>1&&(b(i,"popup-slides"),b(n,"popup-slides-text"),v--,d.innerText=v),e.target.closest(".popup-arrow_right")&&v<f&&(S(i,"popup-slides"),S(n,"popup-slides-text"),v++,d.innerText=v)}))})),screen.width<1024){const e=document.querySelector(".portfolio-slider-mobile").querySelectorAll(".portfolio-slider__slide-frame"),t=document.querySelector("body"),r=t.querySelector("#mobile-counter__total"),o=t.querySelector("#mobile-counter__current");let l=1,s=e.length;r.innerText=s;const c=()=>{e.forEach(((e,t)=>{t+1!==l?e.classList.add("hidden"):e.classList.remove("hidden")})),o.innerText=l};t.addEventListener("click",(e=>{e.target.closest("#portfolio-arrow-mobile_right")&&(l<s?(l++,c()):(l=1,c())),e.target.closest("#portfolio-arrow-mobile_left")&&(l>1?(l--,c()):(l=s,c()))}))}})(),o(),(()=>{const e=document.querySelector(".popup-consultation"),t=document.querySelector("body");let r=!1;t.addEventListener("click",(t=>{t.target.closest("button.consultation")&&(e.style.visibility="visible",r=!0),r&&(t.target.closest(".close")||"popup popup-consultation"===t.target.className)&&(e.style.visibility="hidden",r=!1)}))})(),(()=>{const e=document.querySelector(".reviews-slider").querySelectorAll(".reviews-slider__slide"),t=document.querySelector("body");let r=1,o=e.length;const l=()=>{e.forEach(((e,t)=>{t+1!==r?e.classList.add("hidden"):e.classList.remove("hidden")}))};t.addEventListener("click",(e=>{e.target.closest("#reviews-arrow_right")&&(r<o?(r++,l()):(r=1,l())),e.target.closest("#reviews-arrow_left")&&(r>1?(r--,l()):(r=o,l()))})),l()})(),(()=>{document.querySelector(".accordion");const e=document.querySelectorAll("h2.title_block");e.forEach((t=>{t.addEventListener("click",(t=>{e.forEach((r=>{t.target.classList.contains("msg-active")?t.target.classList.remove("msg-active"):(e.forEach((e=>{e.classList.remove("msg-active")})),t.target.classList.add("msg-active"))}))}))}))})(),e("feedback1"),e("feedback2"),e("feedback3"),e("feedback4"),e("feedback5"),e("feedback6"),window.addEventListener("resize",(()=>{t(),o(),r()}))})();